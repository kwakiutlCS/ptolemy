$('#thermo_data_collection').html("");

$('#thermo_data_collection').html("<%= escape_javascript(render(:partial => 'thermal_capacities/tbody')) %>");

$("#thermo_time_field").on("keyup", function() {
	 if ($(this).val() == "") {
	     $("#thermo_energy_calculator").text("0.0");
	     $("#thermo_energy_field").val("");
	 }
	 else {
	     var t = parseFloat($(this).val());
	     if (t != NaN) {
		  $("#thermo_energy_calculator").text((Math.round(t*0.5*10)/10).toFixed(1));
		  $("#thermo_energy_field").val(t*500);
	     }
	 }
    });


var options = {
     xaxis: { min:0, max: 800},
     yaxis: { min:0, tickFormatter: function (v) {
				  if (v === 0)
				      return "0";
				  var e = 0, tmp = v;
				  while (tmp > 10) {
				      tmp /= 10;
				      e += 1;
				  }
				  return (v/Math.pow(10,e)).toFixed(1)+" x 10<sup>"+e+"</sup>";
			     }
    }};

$.plot($("#thermo_graph"), [
    {
     data: <%= @plot_data %>,
     points: { show: true },
     label: "Dados obtidos pelos seus colegas"
     
    },
    {
     data: <%= @user_data %>,
     points: { show: true },
     label: "Dados obtidos por si"
     
    },
    
  ],
    options
  );

$(".flot-x-axis").css({left: "40px"});
$(".flot-y-axis").css({top: "-10px"});